<!DOCTYPE html>
<html>
  <head>
    <title>Potato Raw Material Form</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <link rel="icon" href="./images/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

  <body>
    <!-- Logo -->
    <div class="logo">
      <a href="https://rafiqfarmfoods.com/" target="_blank">
        <img id="logoImg" src="./images/rff.png" />
      </a>
    </div>

    <!-- Form -->
    <h1>Potato Raw Material Form</h1>
    <div id="line"></div>
    <form id="PotatoRawMaterialForm">
      <!-- Wapda -->
      <div class="RSD">
        <div class="wrapper">
          <label for="RSD">Date</label>
          <input
            type="date"
            id="wapdapeak1"
            name="PotatoRawMaterial Date"
            placeholder="Enter Date"
            required
          />
        </div>
        <div class="wrapper">
          <label for="RSD">Vehicle No</label>
          <input
            type="text"
            id="vehicleNo"
            name="PotatoRawMaterial Vehicle No"
            placeholder="Enter Vehicle No"
            oninput="formatVehicleNumber()"
            required
          />
        </div>
      </div>

      <div class="RSD">
        <div class="wrapper">
          <label for="RSD">Shift</label>
          <input
            type="time"
            id="wapdatotal"
            name="PotatoRawMaterial Shift"
            required
            placeholder="Enter Shift"
          />
        </div>
        <div class="wrapper">
          <label class="RED">Potato Variety</label>
          <input
            type="text"
            id="wapdatotal"
            name="PotatoRawMaterial Potato Variety"
            required
            placeholder="Enter Potato Variety"
          />
        </div>
      </div>
      <h2>Off Loading Time</h2>

      <div class="RSD">
        <div class="wrapper">
          <label for="RSD" class="label">Start off loading time</label>
          <!-- <div class="RED"> -->
          <input
            type="time"
            id="wapdapeakend"
            name="PotatoRawMaterial Start off loading time of potatoes"
            required
            placeholder="HH:MM"
          />
        </div>

        <div class="wrapper">
          <label for="RSD" class="label">End off loading time</label>
          <input
            type="time"
            id="wapdaoffpeakend"
            name="PotatoRawMaterial End off loading time of potatoes"
            required
            placeholder="HH:MM"
          />
        </div>
      </div>

      <div class="RSD">
        <div class="wrapper">
          <label for="RSD" class="label">LIR Reference No.</label>
          <!-- <div class="RED"> -->
          <input
            type="number"
            
            min="0"
            id="wapdapeakused"
            name="PotatoRawMaterial LIR Reference Number."
            required
            placeholder="Enter LIR Reference No."
          />
        </div>

        <div class="wrapper">
          <label for="RSD" class="label">Gate Pass No.</label>
          <input
            type="number"
            
            min="0"
            id="wapdaoffpeakused"
            name="PotatoRawMaterial Gate Pass Number"
            required
            placeholder="Enter Gate Pass No."
          />
        </div>
      </div>

      <div class="RSD">
        <div class="wrapper">
          <label for="RSD" class="label">No of bags</label>
          <input
            type="number"
            
            min="0"
            id="wapdapeakoffpeaktotalused"
            name="PotatoRawMaterial No of bags for potatoes"
            required
            placeholder="Enter No of bags"
          />
        </div>

        <div class="wrapper">
          <label>Gross weight(kg)</label>
          <input
            type="number"
            id="availability-duration"
            name="PotatoRawMaterial Gross weight(kg) of Potatoes"
            placeholder="Enter Gross weight(kg)"
            min="0"
            required
          />
        </div>
      </div>

      <div class="RSD">
        <div class="wrapper">
          <label for="RSD">Grader under Size(kg)</label>
          <!-- <div class="RED"> -->
          <input
            type="number"
            id="gen1Units"
            name="PotatoRawMaterial Grader under Size Potatoes"
            placeholder="Enter Grader under Size"
            min="0"
            required
          />
        </div>

        <div class="wrapper">
          <label for="RED">Recovered Potatoes(kg)</label>
          <input
            type="number"
            id="gen1diesel"
            name="PotatoRawMaterial Recovered Potatoes"
            required
            placeholder="Enter Recovered Potatoes"
            min="0"
          />
        </div>
      </div>

      <div class="RSD">
        <div class="wrapper">
          <label for="RED">Actual under Size(kg)</label>
          <input
            type="number"
            id="gen1duration"
            name="PotatoRawMaterial Actual under Size potatoes"
            required
            placeholder="Enter Actual under Size"
            min="0"
          />
        </div>
        <div class="wrapper">
          <label for="RED">Soil(kg)</label>
          <!-- <div class="RED"> -->
          <input
            type="number"
            id="gen1Unitsend"
            name="PotatoRawMaterial Soil"
            required
            placeholder="Enter Soil(kg)"
            min="0"
            
          />
        </div>
      </div>

      <h2>Wastage(kg)</h2>
      <div class="RSD">
        <div class="wrapper">
          <label for="RSD">Fungus(kg)</label>
          <input
            type="number"
            id="gen1dieselend"
            name="PotatoRawMaterial Fungus"
            required
            placeholder="Enter Fungus"
            min="0"
          />
        </div>

        <div class="wrapper">
          <label for="RSD">Damage(kg)</label>
          <input
            type="number"
            id="gen1durationend"
            name="PotatoRawMaterial Damage"
            required
            placeholder="Enter Damage"
            min="0"
          />
        </div>
      </div>

      <div class="RSD">
        <div class="wrapper">
          <label for="RSD" class="label">Net Weight(kg)</label>
          <!-- <div class="RED"> -->
          <input
            type="number"
            required
            min="0"
            id="gen1unittotal"
            name="PotatoRawMaterial Net Weight"
            required
            placeholder="Enter Net Weight(kg)"
          />
        </div>
        <div class="wrapper">
          <label for="RSD" class="label">Sign or Sorting</label>
          <input
            type="text"
            id="gen1dieseltotal"
            name="PotatoRawMaterial Sign or Sorting"
            required
            placeholder="Sign or Sorting"
          />
        </div>
      </div>

      <input type="submit" value="Submit" />
    </form>

    <!-- spinner html -->
    <div class="spinner-container">
      <div class="spinner"></div>
    </div>
    <!-- end of spinner html -->

    <!-- Add the modal HTML code -->
    <div id="myModal" class="modal">
      <span class="close">&times;</span>
      <div class="modal-content">
        <p id="modal-message"></p>
        <button id="closeBtn">Close</button>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <p>
        <a href="https://rafiqfarmfoods.com/" target="_blank"
          >Copyright &copy; Rafiq Farm Foods | All Right Reserved.
        </a>
      </p>
    </footer>
    <!-- end of Footer -->

    <script>
      const scriptURL =
        "https://script.google.com/macros/s/AKfycbwAe8avrenNTyJAKPT_vc1hss5NLCHg47vuAczXu0OKupiZYkze4Y8AlfO3Hvgximdx/exec";
      const form = document.getElementById("PotatoRawMaterialForm");

      // modal javascript
      // Get the modal element, the close button, and the close button inside the modal
      const modal = document.getElementById("myModal");
      const closeBtn = document.querySelector(".close");
      const modalCloseBtn = document.getElementById("closeBtn");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        modal.style.display = "block";
        fetch(scriptURL, { method: "POST", body: new FormData(form) })
          .then((response) => {
            hideSpinner(); // Hide the spinner
            document.getElementById("modal-message").textContent = "Success!";
          })
          .catch((error) => {
            hideSpinner(); // Hide the spinner
            document.getElementById("modal-message").textContent =
              "Error! " + error.message;
          });
      });
      // Close the modal when the close button is clicked
      closeBtn.addEventListener("click", () => {
        modal.style.display = "none";
      });
      // Close the modal when the close button inside the modal is clicked
      modalCloseBtn.addEventListener("click", () => {
        modal.style.display = "none";
      });
    </script>

    <!-- reseting form after submitting -->
    <script>
      document
        .getElementById("PotatoRawMaterialForm")
        .addEventListener("submit", function (event) {
          event.preventDefault(); // Prevent the default form submission

          this.reset();
        });
    </script>
    <!-- end of for reseting after submitting -->

    <script>
      // Function to show the spinner
      function showSpinner() {
        const spinnerContainer = document.querySelector(".spinner-container");
        spinnerContainer.style.display = "flex";
        modal.style.display = "none";
      }

      // Function to hide the spinner
      function hideSpinner() {
        const spinnerContainer = document.querySelector(".spinner-container");
        spinnerContainer.style.display = "none";
        modal.style.display = "block";
      }

      // Function to handle form submission
      function handleSubmit(event) {
        event.preventDefault();
        showSpinner(); // Show the spinner
      }

      // Add event listener to form submit

      form.addEventListener("submit", handleSubmit);
    </script>
    <!-- End of spinner -->

    <!-- Vehicle No Formating -->

    <script>
      function formatVehicleNumber() {
        const vehicleNoInput = document.getElementById("vehicleNo");
        const originalValue = vehicleNoInput.value.toUpperCase();

        let formattedValue = "";
        let lastCharWasDigit = false;

        for (let i = 0; i < originalValue.length; i++) {
          const char = originalValue.charAt(i);

          if ((char >= "A" && char <= "Z") || (char >= "0" && char <= "9")) {
            if (
              i !== 0 &&
              ((char >= "A" && char <= "Z" && lastCharWasDigit) ||
                (char >= "0" && char <= "9" && !lastCharWasDigit))
            ) {
              formattedValue += "-";
            }
            formattedValue += char;
            lastCharWasDigit = char >= "0" && char <= "9";
          }
        }

        vehicleNoInput.value = formattedValue;
      }
    </script>
  </body>
</html>
